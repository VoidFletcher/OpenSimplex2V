// --------------------------------------------------------------------------------------------------
//  LookupTable.cs
//  ==============
//  Gradient lookup tables used by the OpenSimplex2V noise implementation.
//
//  Authored by Dylan Engelbrecht (VoidFletcher):
//      https://github.com/VoidFletcher/OpenSimplex2V
//
//  Based on the OpenSimplex2 algorithm by KdotJPG:
//      https://github.com/KdotJPG/OpenSimplex2
//
//  See LICENSE file in the repository root for license information.
// --------------------------------------------------------------------------------------------------

using Unity.Burst;
using Unity.Collections;
using Unity.Collections.LowLevel.Unsafe;

namespace OpenSimplex2V
{
	public static class LookupTable
	{
		public static unsafe class Gradients
		{
			private static float* data;

			public static void Prepare()
			{
				if (data != null)
				{
					return;
				}

				data = (float*)UnsafeUtility.Malloc(
					sizeof(float) * 1024,
					16,
					Allocator.Persistent);

				FillGradients();
			}
			
			public static float* GetPointer()
			{
				if (data is null)
				{
					Prepare();
				}
				
				return data;
			}

			[BurstDiscard]
			private static void FillGradients()
			{
				float[] table =
				{
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
					-7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					-11.093991495f, -4.213452452f, 0.0f, 0.0f,
					-4.213452452f, -11.093991495f, 0.0f, 0.0f,
					-7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					-4.213452452f, 0.0f, -11.093991495f, 0.0f,
					-11.093991495f, 0.0f, -4.213452452f, 0.0f,
					-7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					-11.093991495f, 0.0f, 4.213452452f, 0.0f,
					-4.213452452f, 0.0f, 11.093991495f, 0.0f,
					-3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					0.0f, 4.213452452f, -11.093991495f, 0.0f,
					0.0f, 11.093991495f, -4.213452452f, 0.0f,
					-3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					0.0f, 11.093991495f, 4.213452452f, 0.0f,
					0.0f, 4.213452452f, 11.093991495f, 0.0f,
					7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					4.213452452f, -11.093991495f, 0.0f, 0.0f,
					11.093991495f, -4.213452452f, 0.0f, 0.0f,
					7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					11.093991495f, 0.0f, -4.213452452f, 0.0f,
					4.213452452f, 0.0f, -11.093991495f, 0.0f,
					7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					4.213452452f, 0.0f, 11.093991495f, 0.0f,
					11.093991495f, 0.0f, 4.213452452f, 0.0f,
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
					-7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					-11.093991495f, -4.213452452f, 0.0f, 0.0f,
					-4.213452452f, -11.093991495f, 0.0f, 0.0f,
					-7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					-4.213452452f, 0.0f, -11.093991495f, 0.0f,
					-11.093991495f, 0.0f, -4.213452452f, 0.0f,
					-7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					-11.093991495f, 0.0f, 4.213452452f, 0.0f,
					-4.213452452f, 0.0f, 11.093991495f, 0.0f,
					-3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					0.0f, 4.213452452f, -11.093991495f, 0.0f,
					0.0f, 11.093991495f, -4.213452452f, 0.0f,
					-3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					0.0f, 11.093991495f, 4.213452452f, 0.0f,
					0.0f, 4.213452452f, 11.093991495f, 0.0f,
					7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					4.213452452f, -11.093991495f, 0.0f, 0.0f,
					11.093991495f, -4.213452452f, 0.0f, 0.0f,
					7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					11.093991495f, 0.0f, -4.213452452f, 0.0f,
					4.213452452f, 0.0f, -11.093991495f, 0.0f,
					7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					4.213452452f, 0.0f, 11.093991495f, 0.0f,
					11.093991495f, 0.0f, 4.213452452f, 0.0f,
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
					-7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					-11.093991495f, -4.213452452f, 0.0f, 0.0f,
					-4.213452452f, -11.093991495f, 0.0f, 0.0f,
					-7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					-4.213452452f, 0.0f, -11.093991495f, 0.0f,
					-11.093991495f, 0.0f, -4.213452452f, 0.0f,
					-7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					-11.093991495f, 0.0f, 4.213452452f, 0.0f,
					-4.213452452f, 0.0f, 11.093991495f, 0.0f,
					-3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					0.0f, 4.213452452f, -11.093991495f, 0.0f,
					0.0f, 11.093991495f, -4.213452452f, 0.0f,
					-3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					0.0f, 11.093991495f, 4.213452452f, 0.0f,
					0.0f, 4.213452452f, 11.093991495f, 0.0f,
					7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					4.213452452f, -11.093991495f, 0.0f, 0.0f,
					11.093991495f, -4.213452452f, 0.0f, 0.0f,
					7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					11.093991495f, 0.0f, -4.213452452f, 0.0f,
					4.213452452f, 0.0f, -11.093991495f, 0.0f,
					7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					4.213452452f, 0.0f, 11.093991495f, 0.0f,
					11.093991495f, 0.0f, 4.213452452f, 0.0f,
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
					-7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					-11.093991495f, -4.213452452f, 0.0f, 0.0f,
					-4.213452452f, -11.093991495f, 0.0f, 0.0f,
					-7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					-4.213452452f, 0.0f, -11.093991495f, 0.0f,
					-11.093991495f, 0.0f, -4.213452452f, 0.0f,
					-7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					-11.093991495f, 0.0f, 4.213452452f, 0.0f,
					-4.213452452f, 0.0f, 11.093991495f, 0.0f,
					-3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					0.0f, 4.213452452f, -11.093991495f, 0.0f,
					0.0f, 11.093991495f, -4.213452452f, 0.0f,
					-3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					0.0f, 11.093991495f, 4.213452452f, 0.0f,
					0.0f, 4.213452452f, 11.093991495f, 0.0f,
					7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					4.213452452f, -11.093991495f, 0.0f, 0.0f,
					11.093991495f, -4.213452452f, 0.0f, 0.0f,
					7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					11.093991495f, 0.0f, -4.213452452f, 0.0f,
					4.213452452f, 0.0f, -11.093991495f, 0.0f,
					7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					4.213452452f, 0.0f, 11.093991495f, 0.0f,
					11.093991495f, 0.0f, 4.213452452f, 0.0f,
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
					-7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					-11.093991495f, -4.213452452f, 0.0f, 0.0f,
					-4.213452452f, -11.093991495f, 0.0f, 0.0f,
					-7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					-4.213452452f, 0.0f, -11.093991495f, 0.0f,
					-11.093991495f, 0.0f, -4.213452452f, 0.0f,
					-7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					-7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					-11.093991495f, 0.0f, 4.213452452f, 0.0f,
					-4.213452452f, 0.0f, 11.093991495f, 0.0f,
					-3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, -7.997138592f, 0.0f,
					0.0f, 4.213452452f, -11.093991495f, 0.0f,
					0.0f, 11.093991495f, -4.213452452f, 0.0f,
					-3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, 7.997138592f, 7.997138592f, 0.0f,
					0.0f, 11.093991495f, 4.213452452f, 0.0f,
					0.0f, 4.213452452f, 11.093991495f, 0.0f,
					7.997138592f, -7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, -7.997138592f, 3.594631769f, 0.0f,
					4.213452452f, -11.093991495f, 0.0f, 0.0f,
					11.093991495f, -4.213452452f, 0.0f, 0.0f,
					7.997138592f, -3.594631769f, -7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, -7.997138592f, 0.0f,
					11.093991495f, 0.0f, -4.213452452f, 0.0f,
					4.213452452f, 0.0f, -11.093991495f, 0.0f,
					7.997138592f, -3.594631769f, 7.997138592f, 0.0f,
					7.997138592f, 3.594631769f, 7.997138592f, 0.0f,
					4.213452452f, 0.0f, 11.093991495f, 0.0f,
					11.093991495f, 0.0f, 4.213452452f, 0.0f,
					7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					11.093991495f, 4.213452452f, 0.0f, 0.0f,
					4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-7.997138592f, 7.997138592f, -3.594631769f, 0.0f,
					-7.997138592f, 7.997138592f, 3.594631769f, 0.0f,
					-4.213452452f, 11.093991495f, 0.0f, 0.0f,
					-11.093991495f, 4.213452452f, 0.0f, 0.0f,
					-3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, -7.997138592f, 0.0f,
					0.0f, -11.093991495f, -4.213452452f, 0.0f,
					0.0f, -4.213452452f, -11.093991495f, 0.0f,
					-3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					3.594631769f, -7.997138592f, 7.997138592f, 0.0f,
					0.0f, -4.213452452f, 11.093991495f, 0.0f,
					0.0f, -11.093991495f, 4.213452452f, 0.0f,
				};

				for (int i = 0; i < 1024; i++)
				{
					data[i] = table[i];
				}
			}
			
			public static void Dispose()
			{
				if (data != null)
				{
					UnsafeUtility.Free(data, Unity.Collections.Allocator.Persistent);
					data = null;
				}
			}
		}
	}
}